<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>The QMS Build System on Linux</title>
    <meta http-equiv="keywords" content="Validation">
    <meta http-equiv="keywords" content="S/TDC">
    <meta http-equiv="keywords" content="QMS">
    <meta http-equiv="keywords" content="QoS">
    <meta http-equiv="keywords" content="Metrics">
    <meta http-equiv="keywords" content="Services">
    <link href="mailto:info@stdc.com" rev="made">
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <link href="../stylesheets/index.css" rel="stylesheet" type="text/css">
  </head>
  <body bgcolor="#ffffff">
    <p class="center">
      <a href="http://www.stdc.com/">
        <img class="center" src="../images/stdchead2logo.gif" alt="S/TDC"
	     border=0 height="42" width="629">
      </a>
   </p>
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The QMS Build System on Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>We describe here the details of managing the build system that uses POSIX make for building QMS. At this point, the auto configuration aspects of the build system are not fully implemented, and one needs to manually create and massage Config/$VENDORCONFIG for each new platform that QMS is built on. In the near future, a Configure script shall be provided to automate this process.</p>
<p>The build actually proceeds in a number of sequential steps, which may be invoked manually if desired. Each stage proceeds in a depth first fashion. Since autogenerated files are produced in early stages, and libraries are creatred before binaries are linked, this reduces the dependencies between various subdirectories of a project. The steps involved are:</p>
<ol type="1">
<li>build_sources This step ensures that all the source files needed for the rest of the build are actually present. It runs lex, yacc/bison, and idl compilers as needed to create all the source files under the build tree</li>
<li>build_objects This step creates the object (.o) files required by the steps that follow.</li>
<li>build_shared_objects Closely related to the previous step, this creates all the object files required by shared libraries, putting them in a separate dir, and passing in any special flags required for creating shared objects</li>
<li>build_archives This step creates any simple libraries specified in the Makefile</li>
<li>build_shared_archives This step takes the shared object files created in step (iii), and creates a shared library from them, passing in the requisite command line invocation to the linker.</li>
<li>build_cbin This step builds all the C binaries specified in the Makefile</li>
<li>build_c++bin This step builds all the C++ binaries specified in the Makefile</li>
<li>documentation Finally, this step build the documentation by invoking doxygen.</li>
</ol>
<h1><a class="anchor" id="LinuxInstallDetails"></a>
Using the Makefiles to install QMS</h1>
<p>Once the build is done using the procedure above, it is possible to automatically install the build on the system. At this point, the install targets in the various subdirectories have not been tested. Currently, QMS binaries are run in situ in the build tree; however, the intent is that when shipped QMS should be installable with a simple make install</p>
<p>In a similar fashion to the build process, the install process also proceeds in stages, and these are, in turn</p>
<p>INSTALL_idl INSTALL_include INSTALL_lib INSTALL_bin INSTALL_script INSTALL_data INSTALL_state INSTALL_etc INSTALL_man[1-8ln] INSTALL_doc and INSTALL_nls</p>
<p>These should be self evident as to what is installed in each step.</p>
<h1><a class="anchor" id="MakefileNotes"></a>
Notes for Makefile writers</h1>
<p>In order to utilize the full power of this tool, and to simplify your makefile, certain conventions have to be followed. You have to put the following line AFTER all your variable declarations in your Makefile:</p>
<p>include /Config/project.tmpl</p>
<p>where  is defined to be the top of the S/TDC source tree on your installation. For QMS, CONFIG_TOP is defined to be the TOP of the QMS source tree, or SRCTOP. This value may be specified in the Makefile, as a command line argument to make, or as an environment variable.</p>
<p>Next, you should specify the source files in the directory in the variable , and this means <em>all</em> the source files (including the Makefile, idl files, man pages, etc), in order to use the predefined targets depend, build, build_sources, build_objects, build_archives, build_cbin, build_c++bin, and checkoutall.</p>
<p>If you are building any binaries, you should also specify the them as either CPROGRAMS or C++PROGRAMS. Any libraries, similarily, should be listed in LIBRARIES and SHARED_LIBRARIES. Additionally, for each such binary and library, you have to specify the dependencies, in the form binary_BIN or library.a variables.</p>
<p>For installation files in the directory, you should list the files to be installed in the variables idl_INSTALL, include_INSTALL, lib_INSTALL, bin_INSTALL, etc_INSTALL, man_INSTALL, and doc_INSTALL for installing various categories of the installed objects.</p>
<h1><a class="anchor" id="MakefileSynopsis"></a>
Synopsis of a Makefile</h1>
<p>The following variables have no defaults: SRC, CPROGRAMS, C++PROGRAMS, idl_INSTALL, include_INSTALL, lib_INSTALL, bin_INSTALL, etc_INSTALL, man_INSTALL, and doc_INSTALL.</p>
<h1><a class="anchor" id="MakefileCustomization"></a>
Customization of the Makefile</h1>
<p>There are a number or variables which have default values, but maybe overridden by the Makefile. This utility defines the default values for a variable in variables of the form DEFAULT_variable, and if and only if the corresponding variable has not been defined in the Makefile, sets variable = . If you need to add anything to the default value of a variable (for example, adding an extra cpp flag), you may use the following form:</p>
<p>DEFAULT_variable += added value.</p>
<p>but it is recommended that you do not totally override the DEFAULT_variable. If you need to discard the system defaults, you may define the variable totally by saying variable = newvalue.</p>
<p>In addition, idl, cpp, and cflags maybe specified on a per file basis by defining a variable of the form filename.o_CPPFLAGS, etc, if you need to change these flags for just a few files.</p>
<p>Also, you may specify a full path name in the variable PROJECTCONF which should point to a project specific makefile fragment that is loaded last, and maybe used to override the system and site defaults on a per project basis.</p>
<h1><a class="anchor" id="MakefileExample"></a>
Example of a QMS Makefile</h1>
<pre class="fragment">               Include an example Makefile here, with comments
</pre><h1><a class="anchor" id="MakefileVariables"></a>
Variable</h1>
<p>This is a list of the variables currently defined by this utility </p><pre class="fragment">-#  AR
-#  ARCHITECTURE
-#  ARCHIVES
-#  ARFLAGS
-#  AUTO_CFLGS
-#  AUTO_CPP_FLGS
-#  BIN_INSTALL_MODE
-#  C++
-#  C++BINARIES
-#  C++CPPFLAGS
-#  C++CPPINCFLAGS
-#  C++DEBUG
-#  C++FILES
-#  C++FLAGS
-#  C++IDL_FLAGS
-#  C++INCPATHS
-#  C++LDFLAGS
-#  C++LIBPATH
-#  C++LIBS
-#  C++OPTS
-#  C++PP
-#  C++WARNS
-#  C++_IDLFILES
-#  CAUX_CFLGS
-#  CAUX_CPP_FLGS
-#  CBINARIES
-#  CC
-#  CDEBUG
-#  CFILES
-#  CHMOD
-#  CI
-#  CIDL_FLAGS
-#  CO
-#  CONFIGURE_C++CPPFLAGS
-#  CONFIGURE_C++FLAGS
-#  CONFIGURE_C++LIBS
-#  CONFIGURE_C++PP
-#  CONFIGURE_CC
-#  CONFIGURE_CFLAGS
-#  CONFIGURE_CIDLFLAGS
-#  CONFIGURE_CPLUSLDFLAGS
-#  CONFIGURE_CPLUSPLUS
-#  CONFIGURE_CPLUSWARNS
-#  CONFIGURE_CPP
-#  CONFIGURE_CWARNS
-#  CONFIGURE_IDL
-#  CONFIGURE_INSTALL
-#  CONFIGURE_LDFLAGS
-#  CONFIGURE_LD_DEBUGFLG
-#  CONFIGURE_LEX
-#  CONFIGURE_LEXFLAGS
-#  CONFIGURE_LIBFLEX
-#  CONFIGURE_LIBS
-#  CONFIGURE_LIBYACC
-#  CONFIGURE_OPTIMIZE
-#  CONFIGURE_RANLIB
-#  CONFIGURE_USE_GNU
-#  CONFIGURE_XINCLUDE
-#  CONFIGURE_XLIBPATH
-#  CONFIGURE_YACC
-#  CONFIGURE_YACCFLAGS
-#  COPTS
-#  CP
-#  CPP
-#  CPPINCFLAGS
-#  CSTUB_CFLGS
-#  CSTUB_CPP_FLGS
-#  CWARNS
-#  DEFAULT_ACE_ROOT
-#  DEFAULT_AR
-#  DEFAULT_ARCHITECTURE
-#  DEFAULT_AUTO_CFLGS
-#  DEFAULT_BIN_INSTALL_MODE
-#  DEFAULT_C++
-#  DEFAULT_C++CPPFLAGS
-#  DEFAULT_C++CPPINCFLAGS
-#  DEFAULT_C++FLAGS
-#  DEFAULT_C++IDL_FLAGS
-#  DEFAULT_C++INCPATHS
-#  DEFAULT_C++LDFLAGS
-#  DEFAULT_C++LIBS
-#  DEFAULT_C++PP
-#  DEFAULT_C++WARNS
-#  DEFAULT_C++_IDLFILES+
-#  DEFAULT_CC
-#  DEFAULT_CFLAGS
-#  DEFAULT_CHMOD
-#  DEFAULT_CI
-#  DEFAULT_CIDL_FLAGS
-#  DEFAULT_CO
-#  DEFAULT_COPTS
-#  DEFAULT_CP
-#  DEFAULT_CPP
-#  DEFAULT_CPPFLAGS
-#  DEFAULT_CPPINCFLAGS
-#  DEFAULT_CWARNS
-#  DEFAULT_ECHO_COM
-#  DEFAULT_EMACS
-#  DEFAULT_GUESSDIR
-#  DEFAULT_HOSTNAME_CONFIG
-#  DEFAULT_IDL
-#  DEFAULT_INCLUDELIBVPATH
-#  DEFAULT_INCLUDEVPATH
-#  DEFAULT_INSTALL
-#  DEFAULT_INSTALL_MODE
-#  DEFAULT_LDFLAGS
-#  DEFAULT_LD_DEBUGFLG
-#  DEFAULT_LD_LIBRARY_PATH
-#  DEFAULT_LEX
-#  DEFAULT_LEX_LIBS
-#  DEFAULT_LIBS
-#  DEFAULT_MACHINE
-#  DEFAULT_MAKECONFDIR
-#  DEFAULT_MAKEFILE
-#  DEFAULT_MKDIR
-#  DEFAULT_MKDIRHIER
-#  DEFAULT_MV
-#  DEFAULT_NORM_LEXFLAGS
-#  DEFAULT_OBJDIR
-#  DEFAULT_OBJECTS+
-#  DEFAULT_OBJTOP
-#  DEFAULT_PIC
-#  DEFAULT_RANLIB
-#  DEFAULT_RM
-#  DEFAULT_SHELL
-#  DEFAULT_SHLINK
-#  DEFAULT_SRCDIR
-#  DEFAULT_SYSTEM
-#  DEFAULT_TAO_ROOT
-#  DEFAULT_TOUCH
-#  DEFAULT_USE_GNU
-#  DEFAULT_VENDOR
-#  DEFAULT_VENDOR_CONFIG
-#  DEFAULT_XALANCROOT
-#  DEFAULT_XERCESCROOT
-#  DEFAULT_XINCLUDE
-#  DEFAULT_XLIBPATH
-#  DEFAULT_XLIBS
-#  DEFAULT_YACC
-#  DEFAULT_YACCFLAGS
-#  DEFAULT_YACC_LIBS
-#  DEFAULT_bin_INSTALL_MODE
-#  DEFAULT_bindir
-#  DEFAULT_data_INSTALL_MODE
-#  DEFAULT_datadir
-#  DEFAULT_doc_INSTALL_MODE
-#  DEFAULT_docdir
-#  DEFAULT_etc_INSTALL_MODE
-#  DEFAULT_etcdir
-#  DEFAULT_exec_prefix
-#  DEFAULT_idl_INSTALL_MODE
-#  DEFAULT_idldir
-#  DEFAULT_include_INSTALL_MODE
-#  DEFAULT_includedir
-#  DEFAULT_infodir
-#  DEFAULT_lib_INSTALL_MODE
-#  DEFAULT_libdir
-#  DEFAULT_libexecdir
-#  DEFAULT_lispdir
-#  DEFAULT_localstatedir
-#  DEFAULT_man1_INSTALL_MODE
-#  DEFAULT_man1dir
-#  DEFAULT_man2_INSTALL_MODE
-#  DEFAULT_man2dir
-#  DEFAULT_man3_INSTALL_MODE
-#  DEFAULT_man3dir
-#  DEFAULT_man4_INSTALL_MODE
-#  DEFAULT_man4dir
-#  DEFAULT_man5_INSTALL_MODE
-#  DEFAULT_man5dir
-#  DEFAULT_man6_INSTALL_MODE
-#  DEFAULT_man6dir
-#  DEFAULT_man7_INSTALL_MODE
-#  DEFAULT_man7dir
-#  DEFAULT_man8_INSTALL_MODE
-#  DEFAULT_man8dir
-#  DEFAULT_man_INSTALL_MODE
-#  DEFAULT_mandir
-#  DEFAULT_manext
-#  DEFAULT_manl_INSTALL_MODE
-#  DEFAULT_manldir
-#  DEFAULT_mann_INSTALL_MODE
-#  DEFAULT_manndir
-#  DEFAULT_mantop
-#  DEFAULT_nls_INSTALL_MODE
-#  DEFAULT_nlsdir
-#  DEFAULT_oldincludedir
-#  DEFAULT_prefix
-#  DEFAULT_sbindir
-#  DEFAULT_script_INSTALL_MODE
-#  DEFAULT_scriptdir
-#  DEFAULT_sharedstatedir
-#  DEFAULT_state_INSTALL_MODE
-#  DEFAULT_sysconfdir
-#  DEPFLAGS
-#  ECHO_COM
-#  EMACS
-#  FilesToClean
-#  GUESSDIR
-#  HAS_HOSTNAME_CONFIG
-#  HEADERS
-#  HOSTNAME_CONFIG
-#  IDL
-#  IDLFLAGS
-#  IDL_EXT
-#  IDL_EXT_MINUS
-#  IDL_FILES
-#  IDL_TARGETS
-#  INCLUDELIBVPATH
-#  INCLUDEVPATH
-#  INCPATHS
-#  INSTALL
-#  INSTALL_MODE
-#  LDFLAGS
-#  LD_DEBUGFLG
-#  LD_LIBRARY_PATH
-#  LEX
-#  LEXDEBUG
-#  LEXFILES
-#  LEXFLAGS
-#  LEX_LIBS
-#  LIBPATH
-#  LIBREASON
-#  LIBS
-#  LOADED_VENDOR_CONFIG
-#  MACHINE
-#  MAKECONFDIR
-#  MAKEFILE
-#  MKDIR
-#  MKDIRHIER
-#  MV
-#  NLSPATH
-#  NORM_LEXFLAGS
-#  OBJDIR
-#  OBJECTS
-#  OBJTOP
-#  PATH
-#  PIC
-#  RANLIB
-#  REASON
-#  RM
-#  SAUX_CFLGS
-#  SAUX_CPP_FLGS
-#  SHARED_ARCHIVES
-#  SHELL
-#  SHLINK
-#  SRCDIR
-#  SSTUB_CFLGS
-#  SSTUB_CPP_FLGS
-#  STDC_POST_CONFIG
-#  STDC_POST_DEFAULTS
-#  STDC_POST_VENDOR
-#  STDC_PRE_CONFIG
-#  STDC_PRE_DEFAULTS
-#  STDC_PRE_VENDOR
-#  SUBDIR_DIRS
-#  SYSTEM
-#  TMP
-#  TOUCH
-#  USE_GNU
-#  VENDOR
-#  VENDOR_CONFIG
-#  VPATH+
-#  XINCLUDE
-#  XLIBPATH
-#  XLIBS
-#  YACC
-#  YACCFILES
-#  YACCFLAGS
-#  YACC_LIBS
-#  bin_INSTALL_MODE
-#  bindir
-#  data_INSTALL_MODE
-#  datadir
-#  doc_INSTALL_MODE
-#  docdir
-#  etc_INSTALL_MODE
-#  etcdir
-#  exec_prefix
-#  idl_INSTALL_MODE
-#  idldir
-#  include_INSTALL_MODE
-#  includedir
-#  infodir
-#  lib_INSTALL_MODE
-#  libdir
-#  lispdir
-#  localstatedir
-#  man1_INSTALL_MODE
-#  man1dir
-#  man2_INSTALL_MODE
-#  man2dir
-#  man3_INSTALL_MODE
-#  man3dir
-#  man4_INSTALL_MODE
-#  man4dir
-#  man5_INSTALL_MODE
-#  man5dir
-#  man6_INSTALL_MODE
-#  man6dir
-#  man7_INSTALL_MODE
-#  man7dir
-#  man8_INSTALL_MODE
-#  man8dir
-#  man_INSTALL_MODE
-#  mandir
-#  manext
-#  manl_INSTALL_MODE
-#  manldir
-#  mann_INSTALL_MODE
-#  manndir
-#  mantop
-#  nls_INSTALL_MODE
-#  nlsdir
-#  oldincludedir
-#  prefix
-#  sbindir
-#  script_INSTALL_MODE
-#  scriptdir
-#  sharedstatedir
-#  state_INSTALL_MODE
-#  sysconfdir
</pre><p><a class="el" href="README_8install.html">Installing QMS</a> </p>
</div></div><!-- contents -->
    <table width="95%" border="7" frame="box" rules="none">
      <tbody align="center">
	<tr align="center">
	  <td align="center">
	    <table width="100%">
	      <colgroup width="25%">
		<col width="25%" align="left">
		<col span="2" width="25%" align="center">
		<col width="25%" align="right">
	      </colgroup>
	      <tbody align="center">
		<tr>
		  <td colspan="1" align="left">
		   <b>QoS Metrics Services</b> 
		  </td>
		  <td colspan="2" align="right" valign="top">
		    <a href="http://www.stdc.com/">
		      <img src="../images/logoonly.gif"
			   alt="S/TDC"  border=0
			   width=120  height=45>   
		    </a>
		  </td>
		  <td colspan="1" align="right">
		    <small id="xtiny">Revision: 1.2.1</small>
		  </td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
      </tbody>
    </table>
    <script type="text/javascript" language="JavaScript">
      <!--
      document.write("<p align=\"center\"><font size=\"-2\">Last Updated: ");
      document.writeln(document.lastModified);
        document.writeln("</font></p>");
      // -->
    </SCRIPT>
  </body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-indent-data: t
sgml-live-element-indicator: t
sgml-set-face: t
End:
-->
