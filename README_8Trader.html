<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>The QMS Trader</title>
    <meta http-equiv="keywords" content="Validation">
    <meta http-equiv="keywords" content="S/TDC">
    <meta http-equiv="keywords" content="QMS">
    <meta http-equiv="keywords" content="QoS">
    <meta http-equiv="keywords" content="Metrics">
    <meta http-equiv="keywords" content="Services">
    <link href="mailto:info@stdc.com" rev="made">
    <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
    <link href="../stylesheets/index.css" rel="stylesheet" type="text/css">
  </head>
  <body bgcolor="#ffffff">
    <p class="center">
      <a href="http://www.stdc.com/">
        <img class="center" src="../images/stdchead2logo.gif" alt="S/TDC"
	     border=0 height="42" width="629">
      </a>
   </p>
<!-- Generated by Doxygen 1.8.7 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The QMS Trader </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><pre>
   Copyright (C) 2001 System/Technology Development Corporation
   This file is part of QoS Metric Services</pre><pre>   This program is free software; you can redistribute it and/or
   modify it under the terms of the GNU General Public License as
   published by the Free Software Foundation; either version 2 of the
   License, or (at your option) any later version.</pre><pre>   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
   General Public License for more details.</pre><pre>   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
   02111-1307 USA</pre><pre>   You may contact System/Technology Development Corporation at</pre><pre>       System/Technology Development Corporation
       Suite 500, Center for Innovative Technology,
       2214 Rock Hill Road,
       Herndon, VA 20170
       (703) 476-0687
   </pre><pre class="fragment">The QMS Trader is expected to be a collection of components that
perform an important function in the QMS infrastructure. The QMS
Trader provides the all knowing directory service that is
essential for the QMS environment to be operational. At the
present time, the QMS Trader consists of two components

    - @ref QMS_Trader_ECInfo 
    - The TAO CORBA Trading Service

Both these components operating in synchrony provide the
functionality of the QMS Trader. For a basic understanding of the
QMS Trader, please see the section on @ref QMSTraderOverview in
the documentation.

The rest of this document deals with one of the services of the
QMS Trader, the QMS_Trader_ECInfo.
</pre><h1><a class="anchor" id="QMS_Trader_ECInfo"></a>
QMS_Trader_ECInfo - The Event Channel Information Service</h1>
<h2><a class="anchor" id="QMS_Trader_ECInfo_Overview"></a>
Overview</h2>
<pre class="fragment">The QMS Trader Event Channel Information Service
(QMS_Trader_ECInfo) is a well behaved QMS citizen. It inherits
from Command.idl in it's IDL file Trader.idl and implements all
the interfaces that are required for a QMS citizen. In addition
to the citizen interfaces , it also implements four more
interfaces that are specific it's design and they are

   - getAnnounceChannels() 
   - getDataChannels()     
   - getRequestChannels()  
   - getSupplierID()        
</pre><h2><a class="anchor" id="QMS_Trader_ECInfoFunction"></a>
Functionality</h2>
<pre class="fragment">It serves as the registry for all the QoS information sources
operating in the QMS environment. It provides every supplier a
unique supplierID and also ensures that it allocates specific
event channels for its use as setup by the administrator of the
QMS installation. This preconfiguration is done using the
Trader.config file. If the site is not preconfigured by the site
administrator, the QMS_Trader_ECInfo uses default values for the
allocation of event channels.

The QMS_Trader_ECInfo utilizes the CORBA Trading Service to serve
as a registry for the offers it makes. Additionally, it also
enables the use of the Trading Service as a directory service for
the QMS Citizens and clients by enabling the YellowPages
mechanism and activating the appropriate service types.
</pre><h1><a class="anchor" id="Running_QMS_Trader_ECInfo"></a>
Running the QMS_Trader_ECInfo Service</h1>
<ol type="1">
<li>If you haven't already, please read the <a class="el" href="README_8install.html">Installing QMS</a> file and build QMS.</li>
<li>Ensure you are in the correct working directory.<ul>
<li>% cd Core/Trader</li>
</ul>
</li>
<li>The first step above automatically builds the QMS_Trader components in the object directory. This step is not really required, but it makes navigation a lot easier. A symbolic link can be created in your current directory by using the following command.<ul>
<li>% ln -s ../../build/i586-pc-linux-gnu/Core/Trader objdir</li>
</ul>
</li>
<li>Make sure your LD_LIBRARY_PATH is set to contain the path names of the ACE, TAO, and Xerces libraries.<ul>
<li>LD_LIBRARY_PATH=$ACE_ROOT:$TAO_ROOT:$XERCESCROOT/lib:$XALANROOT/c/lib</li>
<li>% export LD_LIBRARY_PATH</li>
</ul>
</li>
<li>We are almost ready to run the QMS_Trader_ECInfo service. However, before doing so, you need to start up the various CORBA services including the Naming Service, the Event Service and the Trading Service. You are advised to read the section in <a class="el" href="README_8run.html">Running QMS</a> to thoroughly understand the process you are undertaking.<ul>
<li>Set the ACE_ROOT environment variable to the root of your ACE/TAO installation</li>
<li>Run "Utilities/Scripts/corba_svc start". This will start multiple copies of the Event Channel with the default names as well as the Naming Service and the Trading Service.</li>
</ul>
</li>
<li>QMS_Trader_ECInfo reads the Trader.config file to obtain its initial configuration. It then exports this initial configuration of the QMS environment as offers to the TAO Trading Service. So make sure that a copy of Trader.config is available in the working directory. Edit it to accurately reflect your environment. If you don't understand this step, leave the default configuration of Trader.config as it is. You can edit Trader.config later. Then execute the following command.<ul>
<li>% ./objdir/QMS_Trader_ECInfo -f Trader.config The QMS_Trader_ECInfo service should now be operational.</li>
</ul>
</li>
</ol>
<ul>
<li>To list the offers currently in the QMS_Trader, use the utility program "ListOffers" . This program takes a service type name and lists all the offers available under that service type. This is how you would invoke the program.<ul>
<li>List all the offers available under the service type STDC_QMS_CITIZEN_QMS_TRADER_ECINFO. These offers describe the event channels used by each data stream.<ul>
<li>% ./objdir/ListOffers -t STDC_QMS_CITIZEN_QMS_TRADER_ECINFO</li>
</ul>
</li>
<li>List all offers available under the service type STDC_QMS_CITIZEN_QMS_TRADER_SUPPLIERID. These offers describe the various Supplier IDs allocated in the environment.<ul>
<li>% ./objdir/ListOffers -t STDC_QMS_CITIZEN_QMS_TRADER_SUPPLIERID</li>
</ul>
</li>
<li>List the offers available under the QMS Trader Yellow Pages. These offers describe the various active data streams that are provided by all the Sensors in the environment.<ul>
<li>% ./objdir/ListOffers -t STDC_QMS_CITIZEN_QMS_TRADER</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>There is a client utility program that can be used to verify the functionality of the QMS Trader. The following describes how you would exercise this program.</p><ul>
<li>List the Announce, Data and <a class="el" href="structRequest.html" title="The guts of the message payload. ">Request</a> event channel names and Event ID's associated with the QMSUniqueName category "QMS_CPU"<ul>
<li>% ./objdir/test/Client -q QMS_CPU</li>
</ul>
</li>
<li>A good exercise would be try a QMSUniqueName category which is not specified in the Trader.config file . This time the QMS Trader will allocate the default Announce, Data and <a class="el" href="structRequest.html" title="The guts of the message payload. ">Request</a> Channels for this new QMSUniqueName and export the relevant offer to the TAO Trading_Service.<ul>
<li>% ./objdir/test/Client -q QMS_LRM </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
    <table width="95%" border="7" frame="box" rules="none">
      <tbody align="center">
	<tr align="center">
	  <td align="center">
	    <table width="100%">
	      <colgroup width="25%">
		<col width="25%" align="left">
		<col span="2" width="25%" align="center">
		<col width="25%" align="right">
	      </colgroup>
	      <tbody align="center">
		<tr>
		  <td colspan="1" align="left">
		   <b>QoS Metrics Services</b> 
		  </td>
		  <td colspan="2" align="right" valign="top">
		    <a href="http://www.stdc.com/">
		      <img src="../images/logoonly.gif"
			   alt="S/TDC"  border=0
			   width=120  height=45>   
		    </a>
		  </td>
		  <td colspan="1" align="right">
		    <small id="xtiny">Revision: 1.2.1</small>
		  </td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
      </tbody>
    </table>
    <script type="text/javascript" language="JavaScript">
      <!--
      document.write("<p align=\"center\"><font size=\"-2\">Last Updated: ");
      document.writeln(document.lastModified);
        document.writeln("</font></p>");
      // -->
    </SCRIPT>
  </body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-indent-data: t
sgml-live-element-indicator: t
sgml-set-face: t
End:
-->
